function showError(message){$("#error-message").html(message),$(".error-modal").modal()}function getRandom(min,max){return Math.random()*(max-min)+min}function addMessageToDOM(traffic){var trafficFeed=$("#trafficFeed");trafficFeed.prepend('<p class="trafficMessage">'+traffic+"</p>"),trafficFeed[0].childElementCount>10&&trafficFeed.html(trafficFeed.children().slice(0,10))}var socket=io.connect(),app=app||{},animator=new Animator;$(function(){var $startButton=($("#trafficFeed"),$("#startCapture")),$stopButton=$("#stopCapture");socket.emit("nodeListRequest"),socket.on("system",function(data){addMessageToDOM(data.msg)}),socket.on("traffic",function(data){var result=animator.displayTraffic(data.traffic[0],data.traffic[1],data.type);result&&addMessageToDOM(data.type+"."+result.toString()+": "+data.msg)}),socket.on("newNode",function(data){animator.addNode(data.ip)}),socket.on("nodeList",function(data){for(var i=0;i<data.list.length;i++)animator.addNode(data.list[i])}),socket.on("error",function(data){showError(data.error)}),$startButton.click(function(e){socket.emit("startCapture")}),$stopButton.click(function(e){socket.emit("stopCapture")})});