function showError(message){$("#error-message").html(message),$(".error-modal").modal()}function getRandom(min,max){return Math.random()*(max-min)+min}function addTrafficToDOM(traffic){var trafficFeed=$("#trafficFeed");trafficFeed.prepend('<p class="trafficMessage">'+traffic+"</p>"),trafficFeed[0].childElementCount>10&&trafficFeed.html(trafficFeed.children().slice(0,10))}var socket=io.connect(),app=app||{},nodeManager=new NodeManager,trafficManager=new TrafficManager,animator=new Animator;nodeManager.addObserver(animator),trafficManager.addObserver(animator),$(function(){var $startButton=($("#trafficFeed"),$("#startCapture")),$stopButton=$("#stopCapture");socket.emit("nodeListRequest"),socket.on("traffic",function(data){addTrafficToDOM(data.msg);var traffic=new Traffic(data.data);trafficManager.processTraffic(traffic)}),socket.on("newNode",function(data){var newNode=new Node(data.node);nodeManager.addNode(newNode)}),socket.on("nodeList",function(data){for(var i=0;i<data.list.length;i++){var newNode=new Node(data.list[i]);nodeManager.addNode(newNode)}}),socket.on("error",function(data){showError(data.error)}),$startButton.click(function(e){socket.emit("startCapture")}),$stopButton.click(function(e){socket.emit("stopCapture")})});