function showError(message){$("#error-message").html(message),$(".error-modal").modal()}function getRandom(min,max){return Math.random()*(max-min)+min}var socket=io.connect(),app=app||{},nodeManager=new NodeManager,trafficManager=new TrafficManager,animator=new Animator;nodeManager.addObserver(animator),trafficManager.addObserver(animator),$(function(){var $allTraffic=$("#trafficFeed"),$startButton=$("#startCapture"),$stopButton=$("#stopCapture");socket.emit("nodeListRequest"),socket.on("traffic",function(data){$allTraffic.prepend(data.msg+"<br/>");var traffic=new Traffic(data.data);trafficManager.processTraffic(traffic)}),socket.on("newNode",function(data){var newNode=new Node(data.node);nodeManager.addNode(newNode)}),socket.on("nodeList",function(data){for(var i=0;i<data.list.length;i++){var newNode=new Node(data.list[i]);nodeManager.addNode(newNode)}}),socket.on("error",function(data){showError(data.error)}),$startButton.click(function(e){socket.emit("startCapture")}),$stopButton.click(function(e){socket.emit("stopCapture")})});